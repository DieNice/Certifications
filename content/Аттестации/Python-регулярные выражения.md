>[!question] Основные методы модуля re
>* match - берет и проверяет подходи ли строка под данный шаблон; ищет префикс;
>* search - находит первую подстроку, которая подходит под шаблон;
>* findall - находит все подстроки, которые подходят под шаблон;
>* sub - находит все подстроки, которые подходят под шаблон и заменяют их строку;
>* inditer - итератор, выдающий match-объекты;
>* split - разделение по шаблону

>[!question] Что такое метасимволы для чего нужны
>```
> - [ ] - можно указать множество подходящих символов
> - [abc] - a или b или c
> - . - соответствует любому только 1 символу
> - [] - соответствует одному символу из содержащихся в скобках
> - - граница последовательности символов в квадратных скобках 
> - ^ - начало строки  
> - $ - конец строки
> - * - 0 или более предыдущих элементов
> - + - 1 или более предыдущих элементов
> - ? - 0 или 1 вхождение предыдущих элементов
> - { } - количество повторений предыдущего символа
> - ( ) - группирует символы в подстроки
> - | - операция или
> - \ - символ экранирования
> - \d - [0-9] - цифры
> - \D - [^0-9]
> - \s - [ \t\n] - пробельные символы
> - \S - [^ \t\n]
> - \w - [a-zA-Z0-9] - буквы + цифры + _
> - \W - [^a-zA-Z0-9]
> ```

>[!question] Что такое квантификаторы?
> - В регулярных выражениях также можно указывать желаемое число повторов нашего символа или группы символов.

>[!question] Что такое группы для чего нужны. 
>Также в регулярном выражении есть такое понятие группа символов. Оно необходимо для указания числа повторов группе символов и переиспользования в других выражениях.

```Python
import re 
pattern = r'\s*([А-Яа-яЁё]+)(\d+)\s*' 
string = r'---   Опять45   ---' 
match = re.search(pattern, string) 
print(f'Найдена подстрока >{match[0]}< с позиции {match.start(0)} до {match.end(0)}') 
print(f'Группа букв >{match[1]}< с позиции {match.start(1)} до {match.end(1)}') 
print(f'Группа цифр >{match[2]}< с позиции {match.start(2)} до {match.end(2)}') 
### 
# -> Найдена подстрока >   Опять45   < с позиции 3 до 16 
# -> Группа букв >Опять< с позиции 6 до 11 
# -> Группа цифр >45< с позиции 11 до 13
```

**Тонкости работы:**

Если к группирующим скобкам применён квантификатор (то есть указано число повторений), то подгруппа в match-объекте будет создана только для последнего соответствия. Например, если бы в примере выше квантификаторы были снаружи от скобок `'\s*([А-Яа-яЁё])+(\d)+\s*'`, то вывод был бы таким:

```Python
# -> Найдена подстрока >   Опять45   < с позиции 3 до 16 
# -> Группа букв >ь< с позиции 10 до 11 
# -> Группа цифр >5< с позиции 12 до 13 
```

Внутри группирующих скобок могут быть и другие группирующие скобки. В этом случае их нумерация производится в соответствии с номером появления открывающей скобки с шаблоне.

```Python
import re 
pattern = r'((\d)(\d))((\d)(\d))' 
string = r'123456789' 
match = re.search(pattern, string) 
print(f'Найдена подстрока >{match[0]}< с позиции {match.start(0)} до {match.end(0)}') 
for i in range(1, 7): 
    print(f'Группа №{i} >{match[i]}< с позиции {match.start(i)} до {match.end(i)}') 
### 
# -> Найдена подстрока >1234< с позиции 0 до 4 
# -> Группа №1 >12< с позиции 0 до 2 
# -> Группа №2 >1< с позиции 0 до 1 
# -> Группа №3 >2< с позиции 1 до 2 
# -> Группа №4 >34< с позиции 2 до 4 
# -> Группа №5 >3< с позиции 2 до 3 
# -> Группа №6 >4< с позиции 3 до 4 
```

>[!question] Как переиспользовать группы?
> pattern = r"(\w+)-\1"
>  string = "test-test"

>[!question] Ленивый поиск подстроки. Как использовать? Для чего использова?
>  r"(te)*?xt"

>[!danger] Задание на аттестации
>Написать регулярное выражение части логов (IP, Тип запроса(GET, POST) ,дата, браузер).
```
103.210.29.185 - - [23/Oct/2021:06:35:28 +0000] "POST /api/public/recovery HTTP/1.1" 200 63 "https://cabinet.les.denistiaglin.com/" "Mozilla/5.0 (Linux; Android 11; M2101K6P) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/94.0.4606.61 Mobile Safari/537.36"
157.37.153.232 - - [23/Oct/2021:06:36:16 +0000] "POST /redirect/5063a95b-73d1-4cb0-8617-3a58814ebcf2.html HTTP/1.1" 200 473 "https://energy.denistiaglin.com/" "Mozilla/5.0 (Linux; Android 8.1.0; D) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/92.0.4515.131 Mobile Safari/537.36"
127.0.0.1 - - [23/Oct/2021:06:36:16 +0000] "POST /wp-cron.php?doing_wp_cron=1634970976.8505320549011230468750 HTTP/1.1" 200 31 "https://itpayment.ru/wp-cron.php?doing_wp_cron=1634970976.8505320549011230468750" "WordPress/5.6.5; https://itpayment.ru"
157.37.153.232 - - [23/Oct/2021:06:36:16 +0000] "GET /favicon.ico HTTP/1.1" 302 5 "https://itpayment.ru/redirect/5063a95b-73d1-4cb0-8617-3a58814ebcf2.html" "Mozilla/5.0 (Linux; Android 8.1.0; D) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/92.0.4515.131 Mobile Safari/537.36"
157.37.153.232 - - [23/Oct/2021:06:36:17 +0000] "GET /wp-includes/images/w-logo-blue-white-bg.png HTTP/1.1" 304 0 "https://itpayment.ru/redirect/5063a95b-73d1-4cb0-8617-3a58814ebcf2.html" "Mozilla/5.0 (Linux; Android 8.1.0; D) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/92.0.4515.131 Mobile Safari/537.36"
```

# Ссылки

1. https://stepik.org/lesson/24470/step/1
2. https://tproger.ru/translations/regular-expression-python (задачи тут)