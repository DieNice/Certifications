
На далеких землях ведется бесконечная и безжалостная война двух королевств - "Душнилдия" и "Токсинбургское царство". Они постоянно отправляют друг на друга небольшие армии в надежде одержать победу, но так до сих пор и непонятно кто выигрывает. У каждой из двух держав есть свои писари, которые записывают подробнейшую статистику о каждом из отрядов, который покинул родные земли чтобы прославиться и принести победу. Бесконечные битвы идут так давно, что никто не может понять, кто побеждает. Вам поставлена важнейшая задача, собирать воинские хронологии от двух королевств и посчитать, кто же выигрывает в этой бессмысленной войне и на кого стоит поставить.

## Краткая постановка задачи
Необходимо будет реализовать 3 независимые программы:
1. Демон генератор, который будет генерировать псевдорандомные данные в csv формате в другой докер контейнер (alpine образ + ssh-сервер) blue_army. Программу обернуть в докер контейнер;
2. Демон генератор, который будет генерировать псевдорандомные данные в xlsx формате в облачное хранилище (Google Drive, Yandex Disk, Dropbox и др.) в папку red_army. Программу обернуть в докер контейнер;
3. Программа, которая будет в определенный промежуток времени считывать данные с двух источников данных, сохранять в базу данных преобразованные, очищенные данные, строить отчёты о военных походах;

## Генерируемые данные
Писари записывают довольную схожую информацию о великих походах своих держав, но имеются небольшие отличия.
В xlsx и в csv файлы необходимо генерировать похожие данные:
* Количество строк (Оно размер армии) определяется случайно, в диапазоне от N до M (задавать в конфигурации генератора или при запуске);
* За один раз генерируется пачка строк, каждая из которых представляет собой воина с описанием его характеристик;
* Существует несколько видов юнитов (воин, лучник, маг-хиллер, капитан), у каждого из видов юнитов преобладают определенные характеристики в большую сторону,  а капитаны имеют специальные умения. Состав и пропорция армии также генерируется случайным образом. При желании, каждое королевство может обучить новый специальный вид войск;
* В каждой пачке армии обязательно должен быть хотя бы один капитан, который может иметь специальное умение;
* Каждый юнит имеет следующие характеристики (урон, защита, хп, мп). Можно расширять;

|time_battle| id_unit  | hp  |  mp | damage  |  defence | use_special_skill  |
|-------|---|---|---|---|---|---|
|date|uuid  | unisned int (hp1,hp2)  | unsigned int (mp1,mp2)  | unsigned int (d1,d2)   | unsigned int (df1,df2) | string  |

**time_battle** - примерно время в которое состоялась битва. У двух источников она может отличаться, допустима некоторая погрешность;
**id_unit** - уникальный идентификатор юнит;
**hp** - здоровье юнита;
**mp** - мана юнита. У воинов и лучников она равна нулю;
**damage** - урон, который наносит юнит;
**defence** - защита юнита;
**use_special_skill** - есть только у капитанов, у остальных пусто. Может быть Пусто, Призыв воинов (+N случайных клонов юнитов из пачки), Щит на свою армию (+D к защите), Боевая ярость (+Dm к урону), Аннигиляция (Жертвует своей армией и убивает другую армию в размере своей * 1,5 + 1)); Каждое королевств  также может придумать и разработать свои уникальные навыки;

Также стоит предусмотреть чтобы с некоторой небольшой вероятностью (0,05% от общей выборки) генерировалась некорректная строка (пустая, отрицательная, слишком большая) или воин который не имеет урона, защиты (крестьянин, который случайно попал на войну).

## Правила битвы

* Чистый урон по юниту расчитывается как Урон - 0,5 * Защита. Если это отрицательное число, то урон будет считаться 0.
* Маги-хиллеры имеют очень низкий урон, хп и защиту, но добавляют всем своим воинам доп. здоровья в размере MP / Размер армии;
* Лучники имеют слабую защиту, мало хп, но повышенные урон;
* Воины имеют довольно много хп, защиты и урон, уступающий только лучникам;

Победа расcчитывается как :
```
(sum(EnemyHP)+sum(extraEnemyHP)) - ((sum(DAMAGE+sum(extraDamage)-0.5
* (sum(EnemyDefence)+sum(extraEnemyDefence)))*nAttack
```

* sum(EnemyHP) - общая сумма здоровья вражеских юнитов;
* sum(extraEnemyHP) - общая сумма доп. здоровья вражеских юнитов (включая умения капитанов);
* sum(DAMAGE) - общая сумма урона своих юнитов;
* sum(extraDamage) - общая сумма доп. урона своих юнитов (включая умения капитанов);
* sum(EnemyDefence) - общая сумма защиты вражеских юнитов;
* sum(extraEnemyDefence) - общая сумма доп. защиты вражеских юнитов (включая умения капитанов);
* nAttack - количество атак необходимых для того чтобы снести всё здоровье вражеской армии;

**Условия победы:**
* побеждает та армия, у которой nAttack ниже;
* при равно nAttack, побеждает та армия, у которой больше урона;

## Резюме
Суть всего действа такова -  бесконечно в два источника будут добавляться данные об отрядах двух армий. Нужно извлекать эти данные, убирать некорректные , сохранить в базу данных и посчитать в какой битве победит какое войско. Также необходимо построить разные виды отчётов "Какая армия побеждает чаще", "Какой вид войск наносит больше всего урона по битвам",  "Урон на каждый тип юнита по всем битвам". Можно также придумать свои отчёты.

## Рекомендации по реализации

* Python 3.10;
* PostgreSQL;
* Docker, Docker-compose;
* Использовать легкий образ Alpine для генерации данных в контейнер; Сделать монтирование в хост файловой системы;
* Постараться использовать ООП, паттерны, сделать программы расширяемыми и гибкими к изменениям;